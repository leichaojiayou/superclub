// pages/summary/summary.js
const App = getApp();
const clubApi = App.api('clubApi');
const wxService = App.wxService;
Page({
  data: {},
  onLoad: function (e) {
    this.setData({
      clubID: e.clubID,
      description: e.description,
      type: e.type
    })
  },
  sbmitForm: function (e) {
    let param = { data: {} }, pages = getCurrentPages(), prevPage = pages[pages.length - 2];
    param.data.club_id = this.data.clubID;
    param.data.description = e.detail.value.description;
    if (!this.data.type) {
      clubApi.modifyClub(param, res => {
        if (res.data.status == 1) {
          prevPage.setData({
            tempDescription: param.data.description
          })
          wxService.navigateBack();
        }
      })
    } else {//创建俱乐部时
      prevPage.setData({
        desc: param.data.description
      })
      wxService.navigateBack();
    }
  }
})