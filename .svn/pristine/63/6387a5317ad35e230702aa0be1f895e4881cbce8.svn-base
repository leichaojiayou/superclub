Page({
    data: {
        checkbox_allStatus: false,
        list: [{
            group: 1, group_text: '分组ONE', group_Status: false,
            group_list: [
                { check_Status: false, user_name: "用户昵称1", user_text: '李慧珍帮报1', img: '../../../assets/images/user.png' },
                { check_Status: false, user_name: "用户昵称1", user_text: '', img: '../../../assets/images/user.png' }]
        },
        {
            group: 2, group_text: '分组TWO', group_Status: false,
            group_list: [
                { check_Status: false, user_name: "用户昵称2", user_text: '李慧珍帮报2', img: '../../../assets/images/user.png' },
                { check_Status: false, user_name: "用户昵称2", user_text: '', img: '../../../assets/images/user.png' }]
        }
        ],
        Select_number: 0,
        Total_SMS: 2,
        page: {
            top_next_text: '使用期限已过，不再提供免费短信服务。',
            top_text1: '向',
            top_text2: '人发送免费短信，发送后剩余',
            top_text3: '条。',
            checkbox_all_name: 'all',
            checkbox_all_text: '全选',
        },
        statu: 1,//状态1 选择成员   状态2  选择成员的下一步
        Setting: false,
    },
    button_Select() {
        wx.navigateTo({
            url: '../send_msg/send_msg',
            success: function (res) {
                // success
            },
            fail: function () {
                // fail
            },
            complete: function () {
                // complete
            },
        })
    }
    ,
    //单个按钮事件
    bind_Select(e) {
        if (this.data.statu == 1) {
            const obj = e.currentTarget.dataset;
            const id = obj.id;
            const item = obj.item;
            const Status = this.data.list[id].group_list[item].check_Status;
            const List = this.data.list;
            const item_list = this.data.list[id].group_list[item];
            if (Status) {
                List[id].group_Status = false;
                item_list.check_Status = false;
                List[id].group_list[item] = item_list;
                this.setData({
                    list: List,

                });
            } else {
                item_list.check_Status = true;
                List[id].group_list[item] = item_list;
                this.setData({
                    list: List,
                });
            }
            this.check();
        }
    }
    ,
    //分组按钮
    bindgroup_Select(e) {
        if (this.data.statu == 1) {
            const obj = e.currentTarget.dataset;
            const id = obj.id
            const Status = this.data.list[id].group_Status;
            const List = this.data.list;
            const Listid = this.data.list[id];
            if (Status) {
                for (const item_index in List[id].group_list) {
                    List[id].group_list[item_index].check_Status = false;
                }
                Listid.group_Status = false;
                List[id] = Listid;
                this.setData({
                    list: List,
                });
            } else {
                for (const item_index in List[id].group_list) {
                    List[id].group_list[item_index].check_Status = true;
                }
                Listid.group_Status = true;
                List[id] = Listid;
                this.setData({
                    list: List,
                });
            }
            this.check();
        }
    },
    //全部选择按钮
    bindSelectAll() {
        if (this.data.statu == 1) {
            const selectedAllStatus = this.data.checkbox_allStatus;
            const List = this.data.list;
            if (selectedAllStatus) {
                for (const index in List) {
                    List[index].group_Status = false;
                    for (const item_index in List[index].group_list) {
                        List[index].group_list[item_index].check_Status = false;
                    }
                }
                this.setData({
                    checkbox_allStatus: false,
                    list: List,
                });
            } else {
                for (const index in List) {
                    List[index].group_Status = true;
                    for (const item_index in List[index].group_list) {
                        List[index].group_list[item_index].check_Status = true;
                    }
                }
                this.setData({
                    checkbox_allStatus: true,
                    list: List,
                });
            }
            this.check();
        }
    },
    check() {
        const List = this.data.list;
        var check = false;
        var num = 0;
        for (const index in List) {
            for (const item_index in List[index].group_list) {
                if (List[index].group_list[item_index].check_Status == true) {
                    check = true;
                    num += 1;
                }
            }
        }
        this.setData({
            Setting: check,
            Select_number: num,
        });
    }
    ,
    onLoad: function (options) {
        // 页面初始化 options为页面跳转所带来的参数
    },
    onReady: function () {
        // 页面渲染完成

    },
    onShow: function () {
        // 页面显示
    },
    onHide: function () {
        // 页面隐藏
    },
    onUnload: function () {
        // 页面关闭
    }
})