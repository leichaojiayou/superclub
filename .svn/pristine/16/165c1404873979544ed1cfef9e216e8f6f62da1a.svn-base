// 俱乐部成员
const App = getApp();
const clubApi = App.api('clubApi');
const wxService = App.wxService;
const config = require('../../../../utils/constant')
Page({
  data: {
    search_text: "搜索",
    memberIoc:[
      config.CDN_URL + '/xiaochengxu/image/lv1@2x.png',
      config.CDN_URL + '/xiaochengxu/image/lv1@2x.png',
      config.CDN_URL + '/xiaochengxu/image/lv6@2x.png',
      config.CDN_URL + '/xiaochengxu/image/lv0@2x.png',]
    
  },
  //组按钮
  bindgroup_button(e) {
    const obj = e.currentTarget.dataset;
    const id = obj.id
    const group_list = this.data.membersList;
    group_list[id].click_status = !group_list[id].click_status;
    this.setData({
      membersList: group_list,
    });

  },
  btn(e) {
    this.setData({
      statu: 1,
    });
  },

  onLoad: function (e) {
    this.setData({
      clubID: e.clubID
    })
    let param = { data: {} }, that = this;
    param.data.club_id = e.clubID;
    param.data.flag = 1;
    clubApi.memeberList(param, res => {
      if (res.data.status == 1) {
        const members = res.data.members
        let list = [],statu = 3;
        for (let i = 0; i < members.length; i++) {
          let member = {};
          member.click_status = true;
          member.ioc = that.data.memberIoc[i];
          member.text = members[i].roleName;
          member.num = members[i].users.length;
          member.list = members[i].users
          statu = 1;
          list.push(member);
        }
        that.setData({
          membersList: list,
          statu:statu
        });
      }
    });
  }

})