class WxService {
    constructor() { }

    //页面跳转
    navigateTo(page_url, json, success, fail) {
        if (page_url) {
            if (typeof success != 'function') {
                success = rs => {
                    console.debug('this is a success callback');
                }
            }
            if (typeof fail != 'function') {
                fail = rs => {
                    console.debug('this is a fail callback');
                }
            }
            if (!/\.\/|\.\.\//.test(page_url)) {
                page_url = this.setPageUrl(page_url, json);
                console.log(page_url);
            }
            wx.navigateTo({
                url: page_url,
                success: res => success(res),
                fail: res => fail(res)
            })
        }
    }
    setPageUrl(page_url, json) {
        page_url = '/pages/' + page_url;
        let paramSerializer = '';
        if (json) {
            let parts = new Array();
            let temp = '';
            for (let key in json) {
                temp = key + '=' + json[key];
                parts.push(temp);
            }
            paramSerializer = parts.join('&')
            page_url += '?' + paramSerializer;
        }
        return page_url
    }
}
module.exports = WxService