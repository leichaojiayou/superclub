// pages/baomingbiaoge/baomingbiaoge.js
Page({
  data: {
    title: [
      '昵称',
      '帮报名者',
      '会员号',
      '会员昵称',
      '电话',
      '性别',
      '报名时间',
    ],
    contents:[],
    activityID:0,
  },
  onLoad: function (options) {
    var activityID = options.activityID
    this.requestApplyForm(activityID)
    // 页面初始化 options为页面跳转所带来的参数
  },
  onReady: function () {
    // 页面渲染完成
  },
  onShow: function () {
    // 页面显示
  },
  onHide: function () {
    // 页面隐藏
  },
  onUnload: function () {
    // 页面关闭
  },
  requestApplyForm:function(activityID){
        var that = this 
        getApp().api('manageApi').applyFormPreview({
            data:{
                activity_id:activityID,
                start:0,
                count:90000
            }},
            function success(res){
                console.log(res);
                var data = res.data
                that.handleData(data)
            },
            function fail(res){

            },
        )
    },

    handleData:function(data){
      var applys = data.activityApplies
      var contents = new Array()
      for(var i=0; i<applys.length;i++){
        var apply = applys[i]
        var sex = '女'
        if(apply.sex == 2){
          sex = '男'
        }
        var item = [
          apply.userName,
          apply.actUserName,
          apply.userNo,
          '会员昵称',
          apply.mobile,
          sex,
          apply.applyTime,
        ]
        contents.push(item)
      }
      
      this.setData({
        contents:contents,
      })
    },
  
})