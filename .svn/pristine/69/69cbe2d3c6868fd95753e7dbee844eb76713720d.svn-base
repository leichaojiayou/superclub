const App = getApp();
const clubApi = App.api('clubApi');
Page({
    data: {
        page: {
            club_logo_img: '../../../assets/images/club_logo.jpg',
            club_start_img: '../../../assets/images/stars.png',
            club_statistics_icon: '../../../assets/images/member.png',
            img: '../../../assets/images/right-errow.png',
        },
    },
    onLoad(options) {
        this.setData({
            clubParam: options
        });
        this.getClubIndex();
    },

    /**
     * 获取俱乐部详情
     */
    getClubIndex() {
        const that = this;
        let param = {};
        param.data = that.data.clubParam;
        clubApi.clubIndex(param, res => {
            that.setData({
                club: res.data.club
            })
        });
    },

    tips() {
        var that = this;
        wx.showModal({
            title: '提示',
            content: '你还不是俱乐部成员，加入俱乐部即可查看俱乐部资料',
            success: function (res) {
                if (res.confirm) {
                    console.log('用户点击确定')
                     that.__memberGather()
                }
            }
        })
    },


    //seting club name
    setClubName(e){
         App.wxService.navigateTo('club/modify/clubName/clubName',{
             clubName:e.currentTarget.dataset.name
            });
    },

    //seting logo
    setClubLogo(){
        console.log('test')
    },

    //seting grade
    setGrade() {
        console.log('test')
    },

    //seting address
    setAddress(){
        console.log('test')
    },

    //主打项目
    setProjects(){
        App.wxService.navigateTo('club/modify/masterProjects/masterProjects');
    },

    //设置加入方式
    setJoinWay(){
        App.wxService.navigateTo('club/modify/joinWay/joinWay');
    },

    //设置颜验证消息
    setCheckMsg(){
         App.wxService.navigateTo('club/modify/checkMsg/checkMsg');
        console.log('test')
    },

    //设置收款账号
    setAccountGather(){
        App.wxService.navigateTo('club/modify/accountGather/accountGather');
    },

    //任免副会长
    setViceChariman(){
        //0:haven't viceChariman 2:have viceChariman
        App.wxService.navigateTo('club/modify/appointMember/appointMember', { type: 0 });
    },

    //任免管理员
    setManager(){
        App.wxService.navigateTo('club/modify/appointMember/appointMember', { type: 1 });
    },

    //移除会员
    removeMember(){
        App.wxService.navigateTo('club/modify/removeMember/removeMember');
    },

    //宣言
    setDeclaration(){
        App.wxService.navigateTo('club/modify/declaration/declaration');

    },

    //设置简介
    setDescription(){
        App.wxService.navigateTo('club/modify/description/description');
        console.log('test')
    },

    //memberGather
    __memberGather(){
        App.wxService.navigateTo('club/modify/clubMember/clubMember');
    },

    deleteClub(){
        let toastParam = {
            title: '确定删除俱乐部？',
            content: '所有活动、群、俱乐部成员将同时删除，且不能恢复。',
        }
        App.wxService.showModal(toastParam, res => {
            if (res.confirm) {
                let param = {}
                let data = {
                    club_id: 100401
                }
                param.data = data;
                clubApi.clubDeleted(param, res => { }, res => { }, res => {
                    if (res.statusCode === 200) {
                        let resultObj = res.data;
                        if (resultObj.status == 1) {
                            App.wxService.navigateBack();
                        }
                    }
                });
            }
        })
    },

    clubQuited(){
        let param = {}
        clubApi.clubIndex(param, res => {
            console.log(res);
        });
    },

    joinClub(){
        let param = {}
        clubApi.clubJoined(param, res => {
            console.log(res);
        });
    }



})